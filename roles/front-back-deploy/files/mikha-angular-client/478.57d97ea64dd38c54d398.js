(self.webpackChunkmikha_angular_client=self.webpackChunkmikha_angular_client||[]).push([[478],{1478:function(t,e,i){"use strict";i.r(e),i.d(e,{FormModule:function(){return F}});var n=i(1116),a=i(1041),o=i(4369),r=i(994),s=i(2935),d=i(3070),p=i(7307),c=i(9550),u=i(8150),l=i(168),g=i(5425),h=i(3576),f=i(529),m=i(1785),Z=i(2693),v=i(6129),T=i(8320),A=i(5162),q=function(){function t(t,e,i){this.httpClient=t,this.basePath=T.Lt,this.defaultHeaders=new Z.WM,this.configuration=new A.V,i&&(this.configuration=i),"string"!=typeof this.configuration.basePath&&("string"!=typeof e&&(e=this.basePath),this.configuration.basePath=e),this.encoder=this.configuration.encoder||new v.H}return t.prototype.addToHttpParams=function(t,e,i){return"object"==typeof e&&e instanceof Date==0?this.addToHttpParamsRecursive(t,e):this.addToHttpParamsRecursive(t,e,i)},t.prototype.addToHttpParamsRecursive=function(t,e,i){var n=this;if(null==e)return t;if("object"==typeof e)if(Array.isArray(e))e.forEach(function(e){return t=n.addToHttpParamsRecursive(t,e,i)});else if(e instanceof Date){if(null==i)throw Error("key may not be null if value is Date");t=t.append(i,e.toISOString().substr(0,10))}else Object.keys(e).forEach(function(a){return t=n.addToHttpParamsRecursive(t,e[a],null!=i?i+"."+a:a)});else{if(null==i)throw Error("key may not be null if value is not object or array");t=t.append(i,e)}return t},t.prototype.findAllFormTemplateUsingGET=function(t,e,i,n,a,o){var r=this;void 0===n&&(n="body"),void 0===a&&(a=!1);var s=new Z.LE({encoder:this.encoder});null!=t&&(s=this.addToHttpParams(s,t,"page")),null!=e&&(s=this.addToHttpParams(s,e,"size")),i&&i.forEach(function(t){s=r.addToHttpParams(s,t,"sort")});var d,p=this.defaultHeaders;(d=this.configuration.lookupCredential("JWT"))&&(p=p.set("Authorization",d));var c=o&&o.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["*/*"])),void 0!==c&&(p=p.set("Accept",c));var u="json";return c&&c.startsWith("text")&&(u="text"),this.httpClient.get(this.configuration.basePath+"/form-template/get-all",{params:s,responseType:u,withCredentials:this.configuration.withCredentials,headers:p,observe:n,reportProgress:a})},t.prototype.findFormTemplateByIdUsingGET=function(t,e,i,n){if(void 0===e&&(e="body"),void 0===i&&(i=!1),null==t)throw new Error("Required parameter id was null or undefined when calling findFormTemplateByIdUsingGET.");var a,o=this.defaultHeaders;(a=this.configuration.lookupCredential("JWT"))&&(o=o.set("Authorization",a));var r=n&&n.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["*/*"])),void 0!==r&&(o=o.set("Accept",r));var s="json";return r&&r.startsWith("text")&&(s="text"),this.httpClient.get(this.configuration.basePath+"/form-template/get/"+encodeURIComponent(String(t)),{responseType:s,withCredentials:this.configuration.withCredentials,headers:o,observe:e,reportProgress:i})},t.prototype.saveUsingPOST=function(t,e,i,n){if(void 0===e&&(e="body"),void 0===i&&(i=!1),null==t)throw new Error("Required parameter dto was null or undefined when calling saveUsingPOST.");var a,o=this.defaultHeaders;(a=this.configuration.lookupCredential("JWT"))&&(o=o.set("Authorization",a));var r=n&&n.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["*/*"])),void 0!==r&&(o=o.set("Accept",r));var s=this.configuration.selectHeaderContentType(["application/json"]);void 0!==s&&(o=o.set("Content-Type",s));var d="json";return r&&r.startsWith("text")&&(d="text"),this.httpClient.post(this.configuration.basePath+"/form-template",t,{responseType:d,withCredentials:this.configuration.withCredentials,headers:o,observe:e,reportProgress:i})},t.prototype.updateUsingPUT=function(t,e,i,n){if(void 0===e&&(e="body"),void 0===i&&(i=!1),null==t)throw new Error("Required parameter dto was null or undefined when calling updateUsingPUT.");var a,o=this.defaultHeaders;(a=this.configuration.lookupCredential("JWT"))&&(o=o.set("Authorization",a));var r=n&&n.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["*/*"])),void 0!==r&&(o=o.set("Accept",r));var s=this.configuration.selectHeaderContentType(["application/json"]);void 0!==s&&(o=o.set("Content-Type",s));var d="json";return r&&r.startsWith("text")&&(d="text"),this.httpClient.put(this.configuration.basePath+"/form-template",t,{responseType:d,withCredentials:this.configuration.withCredentials,headers:o,observe:e,reportProgress:i})},t.\u0275fac=function(e){return new(e||t)(m.LFG(Z.eN),m.LFG(T.GW,8),m.LFG(A.V,8))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),b=i(1269),y=i(3982),w=i(164),U=i(3841),C=i(7064);function J(t,e){if(1&t&&(m.TgZ(0,"mat-option",22),m._uU(1),m.qZA()),2&t){var i=e.$implicit;m.Q6J("value",i.id),m.xp6(1),m.hij(" ",i.name," ")}}function S(t,e){if(1&t){var i=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td"),m.TgZ(2,"div"),m._uU(3),m.qZA(),m.qZA(),m.TgZ(4,"td"),m._uU(5),m.qZA(),m.TgZ(6,"td"),m.TgZ(7,"button",23),m.NdJ("click",function(){var t=m.CHM(i).$implicit;return m.oxw().delete(t)}),m.TgZ(8,"mat-icon"),m._uU(9,"delete"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){var n=e.$implicit;m.xp6(3),m.Oqu(n.field),m.xp6(2),m.hij(" ",n.type," ")}}var x=function(){function t(t,e,i,n,a,o){this.dialogRef=t,this.data=e,this.formTemplateService=i,this.spinner=n,this.authService=a,this.purposeService=o,this.item={field:"",type:"Text"},this.items=[],this.purposesData=[]}return t.prototype.ngOnInit=function(){var t=this;this.spinner.show(),this.purposeService.getAllPurposeOverviewDataUsingGET().subscribe(function(e){t.purposesData=e,console.log(t.purposesData),t.spinner.hide()},function(e){console.log(e),t.spinner.hide()}),this.data?(this.data.purposeId=this.data.purpose.id,this.spinner.hide()):(this.data={},this.data.active=!0)},t.prototype.add=function(){if(this.item.field&&this.item.type){var t={field:this.item.field,type:this.item.type};this.data.data||(this.data.data=[]),this.data.data.push(t),this.item.field=""}},t.prototype.delete=function(t){this.data.data=this.data.data.filter(function(e){return e!==t})},t.prototype.onOk=function(){var t=this;if(this.data.title&&this.data.data&&this.data.data.length>0){this.spinner.show();var e=this.authService.getUserInformation();if(this.data.id)i={id:this.data.id,active:this.data.active,title:this.data.title,description:this.data.description,modifiedById:e.id,modifiedByName:e.name,data:JSON.stringify(this.data.data),purposeId:this.data.purposeId},this.formTemplateService.updateUsingPUT(i).subscribe(function(e){t.spinner.hide(),t.dialogRef.close(t.data)},function(e){t.spinner.hide(),alert("Error: "+e)});else{var i={active:this.data.active,createdById:e.id,createdByName:e.name,description:this.data.description,title:this.data.title,data:JSON.stringify(this.data.data),purposeId:this.data.purposeId};this.formTemplateService.saveUsingPOST(i).subscribe(function(e){var i=JSON.parse(e.data);i&&i.formTemplateId?(t.data.id=i.formTemplateId,t.dialogRef.close(t.data)):t.dialogRef.close(),t.spinner.hide()},function(e){t.spinner.hide(),alert("Error: "+e),t.dialogRef.close()})}}else alert("Invalid Data")},t.\u0275fac=function(e){return new(e||t)(m.Y36(s.so),m.Y36(s.WI),m.Y36(q),m.Y36(b.t2),m.Y36(y.e),m.Y36(w.Q))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-form-upsert"]],decls:55,vars:9,consts:[["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline",1,"full-width"],["name","name","matInput","",3,"ngModel","ngModelChange"],["name","description","matInput","",3,"ngModel","ngModelChange"],["name","purpose",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"row","form-group"],[1,"col-md-10"],[1,"row"],[1,"col-md-12"],["name","itemname","matInput","",3,"ngModel","ngModelChange"],["name","itemdescription","matInput","",3,"ngModel","ngModelChange"],[1,"col-md-2"],["mat-stroked-button","",2,"height","88%","width","100%",3,"disabled","click"],[1,"table","table-bordered","table-striped"],[2,"width","20px"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","cdkFocusInitial","","color","primary",3,"click"],["mat-button","","mat-dialog-close",""],[3,"value"],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(m.TgZ(0,"h2",0),m._uU(1,"Form"),m.qZA(),m.TgZ(2,"mat-dialog-content",1),m.TgZ(3,"mat-form-field",2),m.TgZ(4,"mat-label"),m._uU(5,"Title"),m.qZA(),m.TgZ(6,"input",3),m.NdJ("ngModelChange",function(t){return e.data.title=t}),m.qZA(),m.qZA(),m.TgZ(7,"mat-form-field",2),m.TgZ(8,"mat-label"),m._uU(9,"Description"),m.qZA(),m.TgZ(10,"input",4),m.NdJ("ngModelChange",function(t){return e.data.description=t}),m.qZA(),m.qZA(),m.TgZ(11,"mat-form-field",2),m.TgZ(12,"mat-label"),m._uU(13,"Purpose"),m.qZA(),m.TgZ(14,"mat-select",5),m.NdJ("ngModelChange",function(t){return e.data.purposeId=t}),m.YNc(15,J,2,2,"mat-option",6),m.qZA(),m.qZA(),m.TgZ(16,"mat-checkbox",7),m.NdJ("ngModelChange",function(t){return e.data.active=t}),m._uU(17,"Active"),m.qZA(),m.TgZ(18,"div"),m.TgZ(19,"h4"),m._uU(20,"Items"),m.qZA(),m.TgZ(21,"div",8),m.TgZ(22,"div",9),m.TgZ(23,"div",10),m.TgZ(24,"div",11),m.TgZ(25,"mat-form-field",2),m.TgZ(26,"mat-label"),m._uU(27,"Item Name"),m.qZA(),m.TgZ(28,"input",12),m.NdJ("ngModelChange",function(t){return e.item.field=t}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(29,"div",11),m.TgZ(30,"mat-form-field",2),m.TgZ(31,"mat-label"),m._uU(32,"Item Type"),m.qZA(),m.TgZ(33,"input",13),m.NdJ("ngModelChange",function(t){return e.item.type=t}),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(34,"div",14),m.TgZ(35,"button",15),m.NdJ("click",function(){return e.add()}),m._uU(36," Add "),m.qZA(),m.qZA(),m.qZA(),m.TgZ(37,"div",10),m.TgZ(38,"div",11),m.TgZ(39,"table",16),m.TgZ(40,"thead"),m.TgZ(41,"tr"),m.TgZ(42,"td"),m._uU(43,"Name"),m.qZA(),m.TgZ(44,"td"),m._uU(45,"Type"),m.qZA(),m.TgZ(46,"td",17),m._uU(47,"Action"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(48,"tbody"),m.YNc(49,S,10,2,"tr",18),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(50,"mat-dialog-actions",19),m.TgZ(51,"button",20),m.NdJ("click",function(){return e.onOk()}),m._uU(52," Save "),m.qZA(),m.TgZ(53,"button",21),m._uU(54,"Close"),m.qZA(),m.qZA()),2&t&&(m.xp6(6),m.Q6J("ngModel",e.data.title),m.xp6(4),m.Q6J("ngModel",e.data.description),m.xp6(4),m.Q6J("ngModel",e.data.purposeId),m.xp6(1),m.Q6J("ngForOf",e.purposesData),m.xp6(1),m.Q6J("ngModel",e.data.active),m.xp6(12),m.Q6J("ngModel",e.item.field),m.xp6(5),m.Q6J("ngModel",e.item.type),m.xp6(2),m.Q6J("disabled",!e.item.field||!e.item.type),m.xp6(14),m.Q6J("ngForOf",e.data.data))},directives:[s.uh,s.xY,d.KE,d.hX,c.Nt,a.Fj,a.JJ,a.On,U.gD,n.sg,r.oG,o.lW,s.H8,s.ZT,C.ey,p.Hw],styles:[""]}),t}(),k=i(8512),M=i(2616),I=["sidenav"];function _(t,e){if(1&t){var i=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td"),m.TgZ(8,"mat-checkbox",12),m.NdJ("ngModelChange",function(t){return e.$implicit.active=t}),m.qZA(),m.qZA(),m.TgZ(9,"td"),m.TgZ(10,"button",13),m.NdJ("click",function(){var t=m.CHM(i).$implicit;return m.oxw().upsert(t)}),m.TgZ(11,"mat-icon"),m._uU(12,"edit"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){var n=e.$implicit;m.xp6(2),m.Oqu(n.id),m.xp6(2),m.Oqu(n.title),m.xp6(2),m.Oqu(n.description),m.xp6(2),m.Q6J("ngModel",n.active)}}var N=function(){function t(t,e,i){this.formTemplateService=t,this.spinner=e,this.dialog=i,this.data=[],this.length=0,this.pageSize=f.N.pageSize,this.pageSizeOptions=f.N.pageSizeOptions,this.screenWidth$=new k.X(window.innerWidth)}return t.prototype.onResize=function(t){this.screenWidth$.next(t.target.innerWidth)},t.prototype.getScreenWidth=function(){return this.screenWidth$.asObservable()},t.prototype.ngOnInit=function(){var t=this;this.getScreenWidth().subscribe(function(e){e<1200?(t.showToggle="show",t.mode="over",t.openSidenav=!1):e>1200&&(t.showToggle="hide",t.mode="side",t.openSidenav=!0)}),this.getData({length:0,pageSize:this.pageSize,pageIndex:1})},t.prototype.getData=function(t){var e=this;return this.spinner.show(),this.formTemplateService.findAllFormTemplateUsingGET(t.pageIndex,t.pageSize,["title,asc"]).subscribe(function(t){e.data=t.content,e.length=t.totalElements,e.pageSize=t.size,e.spinner.hide()},function(t){e.spinner.hide(),alert("Error: "+t)}),t},t.prototype.upsert=function(t){var e=this;t?(this.spinner.show(),this.formTemplateService.findFormTemplateByIdUsingGET(t.id).subscribe(function(i){i.data=JSON.parse(i.data),e.spinner.hide(),e.dialog.open(x,{data:i}).afterClosed().subscribe(function(e){e&&(t.title=e.title,t.description=e.description,t.id=e.id,t.active=e.active)})},function(t){e.spinner.hide(),alert("Error: "+t)})):this.dialog.open(x).afterClosed().subscribe(function(t){t&&e.data.push({id:t.id,active:t.active,description:t.description,title:t.title})})},t.\u0275fac=function(e){return new(e||t)(m.Y36(q),m.Y36(b.t2),m.Y36(s.uw))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-form-view"]],viewQuery:function(t,e){var i;1&t&&m.Gf(I,5),2&t&&m.iGM(i=m.CRH())&&(e.matSidenav=i.first)},hostBindings:function(t,e){1&t&&m.NdJ("resize",function(t){return e.onResize(t)},!1,m.Jf7)},decls:31,vars:11,consts:[[1,"drawer-container"],[1,"drawer-sidenav",3,"mode","opened","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],[1,"inner-container",2,"height","100%"],[1,"row"],[1,"col-md-12","form-group"],["mat-stroked-button","","color","primary",2,"margin-right","10px",3,"ngClass","click"],["mat-stroked-button","","color","primary",3,"click"],[1,"col-md-12"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],["disabled","true",3,"ngModel","ngModelChange"],["mat-icon-button","",3,"click"]],template:function(t,e){if(1&t){var i=m.EpF();m.TgZ(0,"mat-sidenav-container",0),m.TgZ(1,"mat-sidenav",1,2),m._UZ(3,"app-settings-side-nav"),m.qZA(),m.TgZ(4,"mat-sidenav-content"),m.TgZ(5,"div",3),m.TgZ(6,"h2"),m._uU(7,"Forms"),m.qZA(),m.TgZ(8,"div",4),m.TgZ(9,"div",5),m.TgZ(10,"button",6),m.NdJ("click",function(){return m.CHM(i),m.MAs(2).toggle()}),m._uU(11," Settings "),m.qZA(),m.TgZ(12,"button",7),m.NdJ("click",function(){return e.upsert(null)}),m._uU(13," New "),m.qZA(),m.qZA(),m.TgZ(14,"div",8),m.TgZ(15,"table",9),m.TgZ(16,"thead"),m.TgZ(17,"tr"),m.TgZ(18,"td"),m._uU(19," Id "),m.qZA(),m.TgZ(20,"td"),m._uU(21," Name "),m.qZA(),m.TgZ(22,"td"),m._uU(23," Description "),m.qZA(),m.TgZ(24,"td"),m._uU(25," Active "),m.qZA(),m.TgZ(26,"td"),m._uU(27," Action "),m.qZA(),m.qZA(),m.qZA(),m.TgZ(28,"tbody"),m.YNc(29,_,13,4,"tr",10),m.qZA(),m.qZA(),m.TgZ(30,"mat-paginator",11),m.NdJ("page",function(t){return e.pageEvent=e.getData(t)}),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}2&t&&(m.xp6(1),m.Q6J("mode",e.mode)("opened",e.openSidenav)("fixedInViewport",!0)("fixedTopGap",0)("fixedBottomGap",0)("opened",!0),m.xp6(9),m.Q6J("ngClass",e.showToggle),m.xp6(19),m.Q6J("ngForOf",e.data),m.xp6(1),m.Q6J("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[l.TM,l.JX,M.k,l.Rh,o.lW,n.mk,n.sg,u.NW,r.oG,a.JJ,a.On,p.Hw],styles:[""]}),t}(),H=i(9831),O=[{path:"",component:N,canActivate:[i(6106).k],data:{role:"MikhaAdmin"}}],P=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[],imports:[[H.Bz.forChild(O)],H.Bz]}),t}(),z=i(9572),E=i(9961),F=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[n.ez,a.u5,g.m,P,l.SJ,h.SettingsModule,u.TU,p.Ps,s.Is,o.ot,d.lN,c.c,r.p9,U.LD,z.rP,p.Ps,s.Is,E.Bb,a.UX]]}),t}()}}]);