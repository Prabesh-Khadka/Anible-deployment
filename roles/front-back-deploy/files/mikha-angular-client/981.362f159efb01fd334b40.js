(self.webpackChunkmikha_angular_client=self.webpackChunkmikha_angular_client||[]).push([[981],{2981:function(e,t,i){"use strict";i.r(t),i.d(t,{PurposeModule:function(){return N}});var a=i(994),n=i(3841),o=i(1116),d=i(1041),r=i(168),c=i(5425),s=i(3576),l=i(2935),g=i(1785),p=i(164),u=i(1269),m=i(3982),h=i(9195),f=i(3070),Z=i(9550),T=i(7064),v=i(4369);function A(e,t){if(1&e&&(g.TgZ(0,"mat-option",13),g._uU(1),g.qZA()),2&e){var i=t.$implicit;g.Q6J("value",i.id),g.xp6(1),g.Oqu(i.name)}}var q=function(){function e(e,t,i,a,n,o){this.dialogRef=e,this.data=t,this.purposeService=i,this.spinner=a,this.authService=n,this.checklistTemplateService=o,this.checklists=[]}return e.prototype.ngOnInit=function(){this.data?this.data.checklistTemplateId=this.data.checkListTemplate.id:(this.data={},this.data.active=!0),this.getChecklists()},e.prototype.getChecklists=function(){var e=this;this.checklistTemplateService.findAllActiveCheckListUsingGET().subscribe(function(t){e.checklists=t},function(e){alert("Error: "+JSON.stringify(e))})},e.prototype.onOk=function(){var e=this;if(this.data.name&&this.data.colorCode&&this.data.checklistTemplateId){this.spinner.show();var t=this.authService.getUserInformation();this.data.id?this.purposeService.updatePurposeUsingPUT({id:this.data.id,active:this.data.active,name:this.data.name,description:this.data.description,modifiedById:t.id,modifiedByName:t.name,colorCode:this.data.colorCode,checklistTemplateId:this.data.checklistTemplateId,defaultVideoImageUrl:this.data.defaultVideoImageUrl,notificationEmail:this.data.notificationEmail,imageVerificationType:this.data.imageVerificationType}).subscribe(function(t){e.spinner.hide(),e.dialogRef.close(e.data)},function(t){e.spinner.hide(),alert("Error: "+t)}):this.purposeService.savePurposeUsingPOST({active:this.data.active,createdById:t.id,createdByName:t.name,description:this.data.description,colorCode:this.data.colorCode,checklistTemplateId:this.data.checklistTemplateId,name:this.data.name,defaultVideoImageUrl:this.data.defaultVideoImageUrl,notificationEmail:this.data.notificationEmail,imageVerificationType:this.data.imageVerificationType}).subscribe(function(t){var i=JSON.parse(t.data);console.log(i),i&&i.purposeId?(e.data.id=i.purposeId,e.dialogRef.close(e.data)):e.dialogRef.close(),e.spinner.hide()},function(t){e.spinner.hide(),alert("Error: "+t),e.dialogRef.close()})}else alert("Invalid Data")},e.\u0275fac=function(t){return new(t||e)(g.Y36(l.so),g.Y36(l.WI),g.Y36(p.Q),g.Y36(u.t2),g.Y36(m.e),g.Y36(h.v))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-purpose-upsert"]],decls:45,vars:9,consts:[["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline",1,"full-width"],["name","name","matInput","",3,"ngModel","ngModelChange"],["name","description","matInput","",3,"ngModel","ngModelChange"],["name","colorcode","matInput","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["value","CIF"],["value","URL"],["mat-button","","cdkFocusInitial","","color","primary",3,"click"],["mat-button","","mat-dialog-close",""],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"h2",0),g._uU(1,"Purpose"),g.qZA(),g.TgZ(2,"mat-dialog-content",1),g.TgZ(3,"mat-form-field",2),g.TgZ(4,"mat-label"),g._uU(5,"Name"),g.qZA(),g.TgZ(6,"input",3),g.NdJ("ngModelChange",function(e){return t.data.name=e}),g.qZA(),g.qZA(),g.TgZ(7,"mat-form-field",2),g.TgZ(8,"mat-label"),g._uU(9,"Description"),g.qZA(),g.TgZ(10,"input",4),g.NdJ("ngModelChange",function(e){return t.data.description=e}),g.qZA(),g.qZA(),g.TgZ(11,"mat-form-field",2),g.TgZ(12,"mat-label"),g._uU(13,"Color Code"),g.qZA(),g.TgZ(14,"input",5),g.NdJ("ngModelChange",function(e){return t.data.colorCode=e}),g.qZA(),g.qZA(),g.TgZ(15,"mat-form-field",2),g.TgZ(16,"mat-label"),g._uU(17,"Default Video Image URL"),g.qZA(),g.TgZ(18,"input",5),g.NdJ("ngModelChange",function(e){return t.data.defaultVideoImageUrl=e}),g.qZA(),g.qZA(),g.TgZ(19,"mat-form-field",2),g.TgZ(20,"mat-label"),g._uU(21,"Checklist"),g.qZA(),g.TgZ(22,"mat-select",6),g.NdJ("ngModelChange",function(e){return t.data.checklistTemplateId=e}),g.YNc(23,A,2,2,"mat-option",7),g.qZA(),g.qZA(),g.TgZ(24,"mat-form-field",2),g.TgZ(25,"mat-label"),g._uU(26,"Meeting Request Notification Email"),g.qZA(),g.TgZ(27,"input",5),g.NdJ("ngModelChange",function(e){return t.data.notificationEmail=e}),g.qZA(),g.TgZ(28,"mat-hint",8),g._uU(29,"Seperate Emails with comma"),g.qZA(),g.qZA(),g.TgZ(30,"mat-form-field",2),g.TgZ(31,"mat-label"),g._uU(32,"Image Verification Type"),g.qZA(),g.TgZ(33,"mat-select",6),g.NdJ("ngModelChange",function(e){return t.data.imageVerificationType=e}),g.TgZ(34,"mat-option",9),g._uU(35,"CIF"),g.qZA(),g.TgZ(36,"mat-option",10),g._uU(37,"URL"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(38,"mat-checkbox",6),g.NdJ("ngModelChange",function(e){return t.data.active=e}),g._uU(39,"Active"),g.qZA(),g.qZA(),g.TgZ(40,"mat-dialog-actions",8),g.TgZ(41,"button",11),g.NdJ("click",function(){return t.onOk()}),g._uU(42," Save "),g.qZA(),g.TgZ(43,"button",12),g._uU(44,"Close"),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Q6J("ngModel",t.data.name),g.xp6(4),g.Q6J("ngModel",t.data.description),g.xp6(4),g.Q6J("ngModel",t.data.colorCode),g.xp6(4),g.Q6J("ngModel",t.data.defaultVideoImageUrl),g.xp6(4),g.Q6J("ngModel",t.data.checklistTemplateId),g.xp6(1),g.Q6J("ngForOf",t.checklists),g.xp6(4),g.Q6J("ngModel",t.data.notificationEmail),g.xp6(6),g.Q6J("ngModel",t.data.imageVerificationType),g.xp6(5),g.Q6J("ngModel",t.data.active))},directives:[l.uh,l.xY,f.KE,f.hX,Z.Nt,d.Fj,d.JJ,d.On,n.gD,o.sg,f.bx,T.ey,a.oG,l.H8,v.lW,l.ZT],styles:[""]}),e}(),U=i(529),C=i(8512),b=i(2616),I=i(8150),k=i(7307),y=["sidenav"],S=function(e){return{"margin-top":"5px","background-color":e}};function J(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._UZ(6,"div",12),g._uU(7),g.qZA(),g.TgZ(8,"td"),g._uU(9),g.qZA(),g.TgZ(10,"td"),g._uU(11),g.qZA(),g.TgZ(12,"td"),g._uU(13),g.qZA(),g.TgZ(14,"td"),g.TgZ(15,"mat-checkbox",13),g.NdJ("ngModelChange",function(e){return t.$implicit.active=e}),g.qZA(),g.qZA(),g.TgZ(16,"td"),g.TgZ(17,"button",14),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw().upsert(e)}),g.TgZ(18,"mat-icon"),g._uU(19,"edit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var a=t.$implicit;g.xp6(2),g.Oqu(a.id),g.xp6(2),g.Oqu(a.name),g.xp6(2),g.Q6J("ngStyle",g.VKq(8,S,a.colorCode)),g.xp6(1),g.hij(" ",a.colorCode," "),g.xp6(2),g.Oqu(a.defaultVideoImageUrl),g.xp6(2),g.Oqu(a.notificationEmail),g.xp6(2),g.Oqu(a.imageVerificationType),g.xp6(2),g.Q6J("ngModel",a.active)}}var x=function(){function e(e,t,i){this.purposeService=e,this.spinner=t,this.dialog=i,this.data=[],this.length=0,this.pageSize=U.N.pageSize,this.pageSizeOptions=U.N.pageSizeOptions,this.screenWidth$=new C.X(window.innerWidth)}return e.prototype.onResize=function(e){this.screenWidth$.next(e.target.innerWidth)},e.prototype.getScreenWidth=function(){return this.screenWidth$.asObservable()},e.prototype.ngOnInit=function(){var e=this;this.getScreenWidth().subscribe(function(t){t<1200?(e.showToggle="show",e.mode="over",e.openSidenav=!1):t>1200&&(e.showToggle="hide",e.mode="side",e.openSidenav=!0)}),this.getData({length:0,pageSize:this.pageSize,pageIndex:0})},e.prototype.getData=function(e){var t=this;return this.spinner.show(),this.purposeService.findAllPurposeUsingGET(e.pageIndex+1,e.pageSize,["name,asc"]).subscribe(function(e){console.log(e),t.data=e.content,t.length=e.totalElements,t.pageSize=e.size,t.spinner.hide()},function(e){t.spinner.hide(),alert("Error: "+e)}),e},e.prototype.upsert=function(e){var t=this;e?(this.spinner.show(),this.purposeService.findPurposeByIdUsingGET(e.id).subscribe(function(i){t.spinner.hide(),t.dialog.open(q,{data:i,width:"500px"}).afterClosed().subscribe(function(t){t&&(e.name=t.name,e.description=t.description,e.id=t.id,e.colorCode=t.colorCode,e.active=t.active,e.defaultVideoImageUrl=t.defaultVideoImageUrl,e.notificationEmail=t.notificationEmail,e.imageVerificationType=t.imageVerificationType)})},function(e){t.spinner.hide(),alert("Error: "+e)})):this.dialog.open(q,{width:"500px"}).afterClosed().subscribe(function(e){if(e){var i={id:e.id,active:e.active,created:Date.now().toString(),description:e.description,colorCode:e.colorCode,name:e.name,defaultVideoImageUrl:e.defaultVideoImageUrl,imageVerificationType:e.imageVerificationType};t.data.push(i)}})},e.\u0275fac=function(t){return new(t||e)(g.Y36(p.Q),g.Y36(u.t2),g.Y36(l.uw))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-purpose-view"]],viewQuery:function(e,t){var i;1&e&&g.Gf(y,5),2&e&&g.iGM(i=g.CRH())&&(t.matSidenav=i.first)},hostBindings:function(e,t){1&e&&g.NdJ("resize",function(e){return t.onResize(e)},!1,g.Jf7)},decls:37,vars:11,consts:[[1,"drawer-container"],[1,"drawer-sidenav",3,"mode","opened","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],[1,"inner-container",2,"height","100%"],[1,"row"],[1,"col-md-12","form-group"],["mat-stroked-button","","color","primary",2,"margin-right","10px",3,"ngClass","click"],["mat-stroked-button","","color","primary",3,"click"],[1,"col-md-12"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],[1,"event-dot",3,"ngStyle"],["disabled","true",3,"ngModel","ngModelChange"],["mat-icon-button","",3,"click"]],template:function(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"mat-sidenav-container",0),g.TgZ(1,"mat-sidenav",1,2),g._UZ(3,"app-settings-side-nav"),g.qZA(),g.TgZ(4,"mat-sidenav-content"),g.TgZ(5,"div",3),g.TgZ(6,"h2"),g._uU(7,"Purpose"),g.qZA(),g.TgZ(8,"div",4),g.TgZ(9,"div",5),g.TgZ(10,"button",6),g.NdJ("click",function(){return g.CHM(i),g.MAs(2).toggle()}),g._uU(11," Settings "),g.qZA(),g.TgZ(12,"button",7),g.NdJ("click",function(){return t.upsert(null)}),g._uU(13," New "),g.qZA(),g.qZA(),g.TgZ(14,"div",8),g.TgZ(15,"table",9),g.TgZ(16,"thead"),g.TgZ(17,"tr"),g.TgZ(18,"td"),g._uU(19,"Id"),g.qZA(),g.TgZ(20,"td"),g._uU(21,"Name"),g.qZA(),g.TgZ(22,"td"),g._uU(23,"Color Code"),g.qZA(),g.TgZ(24,"td"),g._uU(25,"Default Image URL"),g.qZA(),g.TgZ(26,"td"),g._uU(27,"Meeting Request Notification Email"),g.qZA(),g.TgZ(28,"td"),g._uU(29,"Image Verification Type"),g.qZA(),g.TgZ(30,"td"),g._uU(31,"Active"),g.qZA(),g.TgZ(32,"td"),g._uU(33,"Action"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(34,"tbody"),g.YNc(35,J,20,10,"tr",10),g.qZA(),g.qZA(),g.TgZ(36,"mat-paginator",11),g.NdJ("page",function(e){return t.pageEvent=t.getData(e)}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(1),g.Q6J("mode",t.mode)("opened",t.openSidenav)("fixedInViewport",!0)("fixedTopGap",0)("fixedBottomGap",0)("opened",!0),g.xp6(9),g.Q6J("ngClass",t.showToggle),g.xp6(25),g.Q6J("ngForOf",t.data),g.xp6(1),g.Q6J("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[r.TM,r.JX,b.k,r.Rh,v.lW,o.mk,o.sg,I.NW,o.PC,a.oG,d.JJ,d.On,k.Hw],styles:[""]}),e}(),_=i(9831),M=[{path:"",component:x,canActivate:[i(6106).k],data:{role:"MikhaAdmin"}}],w=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({providers:[],imports:[[_.Bz.forChild(M)],_.Bz]}),e}(),N=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[o.ez,d.u5,c.m,w,r.SJ,s.SettingsModule,I.TU,k.Ps,l.Is,v.ot,f.lN,Z.c,n.LD,a.p9]]}),e}()}}]);