(self.webpackChunkmikha_angular_client=self.webpackChunkmikha_angular_client||[]).push([[9],{1009:function(t,e,i){"use strict";i.r(e),i.d(e,{ChecklistModule:function(){return x}});var n=i(994),a=i(7307),d=i(9550),o=i(3070),r=i(4369),s=i(2935),c=i(3576),u=i(1116),g=i(1041),l=i(5425),p=i(1785),h=i(9195),m=i(1269),Z=i(3982);function f(t,e){if(1&t){var i=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td"),p.TgZ(2,"div"),p._uU(3),p.qZA(),p.TgZ(4,"div"),p._uU(5),p.qZA(),p.qZA(),p.TgZ(6,"td"),p._uU(7),p.qZA(),p.TgZ(8,"td"),p.TgZ(9,"button",23),p.NdJ("click",function(){var t=p.CHM(i).$implicit;return p.oxw().delete(t)}),p.TgZ(10,"mat-icon"),p._uU(11,"delete"),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&t){var n=e.$implicit;p.xp6(3),p.Oqu(n.name),p.xp6(2),p.hij(" ",n.description," "),p.xp6(2),p.hij(" ",n.duration," ")}}var T=function(){function t(t,e,i,n,a){this.dialogRef=t,this.data=e,this.checklistTemplateService=i,this.spinner=n,this.authService=a,this.item={name:"",duration:null,description:""},this.items=[]}return t.prototype.ngOnInit=function(){this.data||(this.data={},this.data.active=!0,this.data.duration=0)},t.prototype.add=function(){if(this.item.name&&this.item.duration){var t={name:this.item.name,duration:this.item.duration,description:this.item.description};this.data.data||(this.data.data=[]),this.item.duration<=0?alert("Duration must be greater than 0"):(this.data.duration=Number.parseInt(this.data.duration)+Number.parseInt(this.item.duration),this.data.data.push(t),this.item.name="",this.item.duration=null,this.item.description="")}},t.prototype.delete=function(t){this.data.data=this.data.data.filter(function(e){return e!==t}),this.data.duration=this.data.duration-t.duration,null!=this.data.duration&&null!=this.data.duration&&NaN!=this.data.duration||(this.data.duration=0)},t.prototype.onOk=function(){var t=this;if(this.data.name&&this.data.duration&&this.data.data&&this.data.data.length>0){this.spinner.show();var e=this.authService.getUserInformation();if(this.data.id)i={id:this.data.id,active:this.data.active,name:this.data.name,description:this.data.description,duration:this.data.duration,modifiedById:e.id,modifiedByName:e.name,data:JSON.stringify(this.data.data)},this.checklistTemplateService.updateChecklistTemplateUsingPUT(i).subscribe(function(e){t.spinner.hide(),t.dialogRef.close(t.data)},function(e){t.spinner.hide(),alert("Error: "+e)});else{var i={active:this.data.active,createdById:e.id,createdByName:e.name,description:this.data.description,duration:this.data.duration,name:this.data.name,data:JSON.stringify(this.data.data)};this.checklistTemplateService.saveChecklistTemplateUsingPOST(i).subscribe(function(e){var i=JSON.parse(e.data);i&&i.checklistTemplateId?(t.data.id=i.checklistTemplateId,t.dialogRef.close(t.data)):t.dialogRef.close(),t.spinner.hide()},function(e){t.spinner.hide(),alert("Error: "+e),t.dialogRef.close()})}}else alert("Invalid Data")},t.\u0275fac=function(e){return new(e||t)(p.Y36(s.so),p.Y36(s.WI),p.Y36(h.v),p.Y36(m.t2),p.Y36(Z.e))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-checklist-upsert"]],decls:59,vars:9,consts:[["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline",1,"full-width"],["name","name","matInput","",3,"ngModel","ngModelChange"],["name","description","matInput","",3,"ngModel","ngModelChange"],["name","duration","matInput","","readonly","","type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"row","form-group"],[1,"col-md-10"],[1,"row"],[1,"col-md-6"],["name","itemname","matInput","",3,"ngModel","ngModelChange"],["name","itemduration","matInput","","type","number",3,"ngModel","ngModelChange"],[1,"col-md-12"],["name","itemdescription","matInput","",3,"ngModel","ngModelChange"],[1,"col-md-2"],["mat-stroked-button","",2,"height","88%","width","100%",3,"disabled","click"],[1,"table","table-bordered","table-striped"],[2,"width","20px"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","cdkFocusInitial","","color","primary",3,"click"],["mat-button","","mat-dialog-close",""],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(p.TgZ(0,"h2",0),p._uU(1,"Checklist"),p.qZA(),p.TgZ(2,"mat-dialog-content",1),p.TgZ(3,"mat-form-field",2),p.TgZ(4,"mat-label"),p._uU(5,"Name"),p.qZA(),p.TgZ(6,"input",3),p.NdJ("ngModelChange",function(t){return e.data.name=t}),p.qZA(),p.qZA(),p.TgZ(7,"mat-form-field",2),p.TgZ(8,"mat-label"),p._uU(9,"Description"),p.qZA(),p.TgZ(10,"input",4),p.NdJ("ngModelChange",function(t){return e.data.description=t}),p.qZA(),p.qZA(),p.TgZ(11,"mat-form-field",2),p.TgZ(12,"mat-label"),p._uU(13,"Duration"),p.qZA(),p.TgZ(14,"input",5),p.NdJ("ngModelChange",function(t){return e.data.duration=t}),p.qZA(),p.qZA(),p.TgZ(15,"mat-checkbox",6),p.NdJ("ngModelChange",function(t){return e.data.active=t}),p._uU(16,"Active"),p.qZA(),p.TgZ(17,"div"),p.TgZ(18,"h4"),p._uU(19,"Items"),p.qZA(),p.TgZ(20,"div",7),p.TgZ(21,"div",8),p.TgZ(22,"div",9),p.TgZ(23,"div",10),p.TgZ(24,"mat-form-field",2),p.TgZ(25,"mat-label"),p._uU(26,"Item Name"),p.qZA(),p.TgZ(27,"input",11),p.NdJ("ngModelChange",function(t){return e.item.name=t}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(28,"div",10),p.TgZ(29,"mat-form-field",2),p.TgZ(30,"mat-label"),p._uU(31,"Duration (Minutes)"),p.qZA(),p.TgZ(32,"input",12),p.NdJ("ngModelChange",function(t){return e.item.duration=t}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(33,"div",13),p.TgZ(34,"mat-form-field",2),p.TgZ(35,"mat-label"),p._uU(36,"Description"),p.qZA(),p.TgZ(37,"input",14),p.NdJ("ngModelChange",function(t){return e.item.description=t}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(38,"div",15),p.TgZ(39,"button",16),p.NdJ("click",function(){return e.add()}),p._uU(40," Add "),p.qZA(),p.qZA(),p.qZA(),p.TgZ(41,"div",9),p.TgZ(42,"div",13),p.TgZ(43,"table",17),p.TgZ(44,"thead"),p.TgZ(45,"tr"),p.TgZ(46,"td"),p._uU(47,"Name"),p.qZA(),p.TgZ(48,"td"),p._uU(49,"Duration"),p.qZA(),p.TgZ(50,"td",18),p._uU(51,"Action"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(52,"tbody"),p.YNc(53,f,12,3,"tr",19),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(54,"mat-dialog-actions",20),p.TgZ(55,"button",21),p.NdJ("click",function(){return e.onOk()}),p._uU(56," Save "),p.qZA(),p.TgZ(57,"button",22),p._uU(58,"Close"),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("ngModel",e.data.name),p.xp6(4),p.Q6J("ngModel",e.data.description),p.xp6(4),p.Q6J("ngModel",e.data.duration),p.xp6(1),p.Q6J("ngModel",e.data.active),p.xp6(12),p.Q6J("ngModel",e.item.name),p.xp6(5),p.Q6J("ngModel",e.item.duration),p.xp6(5),p.Q6J("ngModel",e.item.description),p.xp6(2),p.Q6J("disabled",!e.item.name||!e.item.duration||!e.item.description),p.xp6(14),p.Q6J("ngForOf",e.data.data))},directives:[s.uh,s.xY,o.KE,o.hX,d.Nt,g.Fj,g.JJ,g.On,g.wV,n.oG,r.lW,u.sg,s.H8,s.ZT,a.Hw],styles:[""]}),t}(),A=i(529),v=i(8512),q=i(168),b=i(2616),k=i(8150),J=["sidenav"];function M(t,e){if(1&t){var i=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p.TgZ(6,"mat-checkbox",12),p.NdJ("ngModelChange",function(t){return e.$implicit.active=t}),p.qZA(),p.qZA(),p.TgZ(7,"td"),p.TgZ(8,"button",13),p.NdJ("click",function(){var t=p.CHM(i).$implicit;return p.oxw().upsert(t)}),p.TgZ(9,"mat-icon"),p._uU(10,"edit"),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&t){var n=e.$implicit;p.xp6(2),p.Oqu(n.id),p.xp6(2),p.Oqu(n.name),p.xp6(2),p.Q6J("ngModel",n.active)}}var S=function(){function t(t,e,i){this.checklistTemplateService=t,this.spinner=e,this.dialog=i,this.data=[],this.length=0,this.pageSize=A.N.pageSize,this.pageSizeOptions=A.N.pageSizeOptions,this.screenWidth$=new v.X(window.innerWidth)}return t.prototype.onResize=function(t){this.screenWidth$.next(t.target.innerWidth)},t.prototype.getScreenWidth=function(){return this.screenWidth$.asObservable()},t.prototype.ngOnInit=function(){var t=this;this.getScreenWidth().subscribe(function(e){e<1200?(t.showToggle="show",t.mode="over",t.openSidenav=!1):e>1200&&(t.showToggle="hide",t.mode="side",t.openSidenav=!0)}),this.getData({length:0,pageSize:this.pageSize,pageIndex:1})},t.prototype.getData=function(t){var e=this;return this.spinner.show(),this.checklistTemplateService.findAllChecklistTemplateUsingGET(t.pageIndex,t.pageSize,["name,asc"]).subscribe(function(t){e.data=t.content,e.length=t.totalElements,e.pageSize=t.size,e.spinner.hide()},function(t){e.spinner.hide(),alert("Error: "+t)}),t},t.prototype.upsert=function(t){var e=this;t?(this.spinner.show(),this.checklistTemplateService.findChecklistTemplateByIdUsingGET(t.id).subscribe(function(i){i.data=JSON.parse(i.data),e.spinner.hide(),e.dialog.open(T,{data:i}).afterClosed().subscribe(function(e){e&&(t.name=e.name,t.description=e.description,t.id=e.id,t.active=e.active)})},function(t){e.spinner.hide(),alert("Error: "+t)})):this.dialog.open(T).afterClosed().subscribe(function(t){if(t){var i={id:t.id,active:t.active,created:Date.now().toString(),createdById:"0001",createdByName:"User 1",data:t.data,description:t.description,duration:t.duration,name:t.name};e.data.push(i)}})},t.\u0275fac=function(e){return new(e||t)(p.Y36(h.v),p.Y36(m.t2),p.Y36(s.uw))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-checklist-view"]],viewQuery:function(t,e){var i;1&t&&p.Gf(J,5),2&t&&p.iGM(i=p.CRH())&&(e.matSidenav=i.first)},hostBindings:function(t,e){1&t&&p.NdJ("resize",function(t){return e.onResize(t)},!1,p.Jf7)},decls:29,vars:11,consts:[[1,"drawer-container"],[1,"drawer-sidenav",3,"mode","opened","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],[1,"inner-container",2,"height","100%"],[1,"row"],[1,"col-md-12","form-group"],["mat-stroked-button","","color","primary",2,"margin-right","10px",3,"ngClass","click"],["mat-stroked-button","","color","primary",3,"click"],[1,"col-md-12"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],["disabled","true",3,"ngModel","ngModelChange"],["mat-icon-button","",3,"click"]],template:function(t,e){if(1&t){var i=p.EpF();p.TgZ(0,"mat-sidenav-container",0),p.TgZ(1,"mat-sidenav",1,2),p._UZ(3,"app-settings-side-nav"),p.qZA(),p.TgZ(4,"mat-sidenav-content"),p.TgZ(5,"div",3),p.TgZ(6,"h2"),p._uU(7,"Checklist"),p.qZA(),p.TgZ(8,"div",4),p.TgZ(9,"div",5),p.TgZ(10,"button",6),p.NdJ("click",function(){return p.CHM(i),p.MAs(2).toggle()}),p._uU(11," Settings "),p.qZA(),p.TgZ(12,"button",7),p.NdJ("click",function(){return e.upsert(null)}),p._uU(13," New "),p.qZA(),p.qZA(),p.TgZ(14,"div",8),p.TgZ(15,"table",9),p.TgZ(16,"thead"),p.TgZ(17,"tr"),p.TgZ(18,"td"),p._uU(19," Id "),p.qZA(),p.TgZ(20,"td"),p._uU(21," Name "),p.qZA(),p.TgZ(22,"td"),p._uU(23," Active "),p.qZA(),p.TgZ(24,"td"),p._uU(25," Action "),p.qZA(),p.qZA(),p.qZA(),p.TgZ(26,"tbody"),p.YNc(27,M,11,3,"tr",10),p.qZA(),p.qZA(),p.TgZ(28,"mat-paginator",11),p.NdJ("page",function(t){return e.pageEvent=e.getData(t)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}2&t&&(p.xp6(1),p.Q6J("mode",e.mode)("opened",e.openSidenav)("fixedInViewport",!0)("fixedTopGap",0)("fixedBottomGap",0)("opened",!0),p.xp6(9),p.Q6J("ngClass",e.showToggle),p.xp6(17),p.Q6J("ngForOf",e.data),p.xp6(1),p.Q6J("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[q.TM,q.JX,b.k,q.Rh,r.lW,u.mk,u.sg,k.NW,n.oG,g.JJ,g.On,a.Hw],styles:[""]}),t}(),N=i(9831),U=[{path:"",component:S,canActivate:[i(6106).k],data:{role:"MikhaAdmin"}}],w=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[],imports:[[N.Bz.forChild(U)],N.Bz]}),t}(),x=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[u.ez,g.u5,l.m,w,q.SJ,c.SettingsModule,k.TU,a.Ps,s.Is,r.ot,o.lN,d.c,n.p9]]}),t}()}}]);